angular.module("ez.dropdown",[]).controller("DropdownCtrl",["$scope","$document","$compile",function(a,b,c){var d,e,f,g,h,i,j=!1,k=function(c){c&&a.clickInside&&g&&g.contains(c.target)?setTimeout(function(){b.one("click",k)}):(a.isOpen=!1,a.$apply())},l=function(){if(j||(j=!0,c(e)(a.$parent,function(a){f=a,g=a[0],d.append(a)})),!i.mobileDisabled){var l=$(window).width();768>l?(setTimeout(function(){var a=$(window).height(),b=f.outerHeight();b>a?(f.css("top",10),f.css("height",a-20)):f.css("top",(a-b)/2)}),d.hasClass("dropdown-select")&&d.find("li").append('<input type="radio"/>'),i.noBackdrop||(h=angular.element('<div class="modal-backdrop in"></div>'),$("body").append(h),h.height($("body").height())),d.addClass("dropdown-mobile"),d.children(0).width(l-40)):d.removeClass("dropdown-mobile")}d.addClass("open"),"function"==typeof a.onToggle&&a.onToggle(!0),setTimeout(function(){b.one("click",k)})},m=function(){d.removeClass("open"),"function"==typeof a.onToggle&&a.onToggle(!1),h&&h.remove(),b.off("click",k)};this.init=function(b,c,f){d=b,e=c.clone(),i=f,a.$watch("isOpen",function(a,b){a!==b&&(a?l():m())})},this.toggle=function(){a.isOpen=!a.isOpen},a.$on("$destroy",function(){d=e=f=g=h=null})}]).directive("dropdown",[function(){return{restrict:"C",controller:"DropdownCtrl",scope:{isOpen:"=?",clickInside:"=?",onToggle:"=?"},compile:function(a){var b=a.find(".dropdown-menu").remove();return function(a,c,d,e){e.init(c,b,d)}}}}]).directive("dropdownToggle",[function(){return{restrict:"C",require:"^dropdown",link:function(a,b,c,d){b.on("click",function(){d.toggle(),a.$apply()})}}}]);