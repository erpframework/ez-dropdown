angular.module("ez.dropdown",[]).controller("DropdownCtrl",["$scope","$document","$compile",function(a,b,c){var d,e,f,g,h,i=!1,j=!1,k=!1,l=function(m,n){k||g&&h&&m&&h.contains(m.target)&&"toggleMenu()"!==m.target.getAttribute("ng-click")||(i?(b.off("click",l),d.removeClass("open")):(j||(j=!0,c(e)(a,function(a){h=a[0],d.append(a)})),setTimeout(function(){b.on("click",l)}),d.addClass("open")),i=!i,"function"==typeof f&&f(i),n||a.$apply())};this.toggleMenu=l,this.init=function(b,c,h){d=b,e=c.clone(),f=null!==h.onToggle?a.$eval(h.onToggle):null,g=h.hasOwnProperty("clickInside"),h.isOpen&&a.$watch(h.isOpen,function(a,b){a!==b&&a!==i&&(l(null,!0),k=!0,setTimeout(function(){k=!1},100))})},a.$on("$destroy",function(){b.off("click",l),d=e=null})}]).directive("dropdown",[function(){return{restrict:"C",controller:"DropdownCtrl",compile:function(a){var b=a.find(".dropdown-menu").remove();return function(a,c,d,e){e.init(c,b,d)}}}}]).directive("dropdownToggle",[function(){return{restrict:"C",require:"^dropdown",link:function(a,b,c,d){b.on("click",d.toggleMenu),a.$on("$destroy",function(){b.off("click",d.toggle)})}}}]);