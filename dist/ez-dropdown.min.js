angular.module("ez.dropdown",[]).controller("DropdownCtrl",["$scope","$document","$compile",function(a,b,c){var d,e,f,g,h=!1,i=!1,j=function(k){g&&e[0].contains(k.target)||(h?(b.off("click",j),d.removeClass("open")):(i||(i=!0,c(e.clone())(a,function(a){d.append(a)})),setTimeout(function(){b.on("click",j)}),d.addClass("open")),h=!h,"function"==typeof f&&f(h),a.$apply())};this.toggleMenu=j,this.init=function(b,c,h){d=b,e=c,f=null!==h.onToggle?a.$eval(h.onToggle):null,g=h.hasOwnProperty("clickInside")},a.$on("$destroy",function(){b.off("click",j),d=e=null})}]).directive("dropdown",[function(){return{restrict:"C",controller:"DropdownCtrl",compile:function(a){var b=a.find(".dropdown-menu").remove();return function(a,c,d,e){e.init(c,b,d)}}}}]).directive("dropdownToggle",[function(){return{restrict:"C",require:"^dropdown",link:function(a,b,c,d){b.on("click",d.toggleMenu),a.$on("$destroy",function(){b.off("click",d.toggle)})}}}]);